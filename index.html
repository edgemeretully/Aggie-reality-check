<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Matthew's Aggie Reality Check</title>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;600;700&display=swap');
        
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        body {
            font-family: 'Poppins', sans-serif;
            background: linear-gradient(135deg, #500000 0%, #8B0000 50%, #2F1B69 100%);
            min-height: 100vh;
            padding: 20px;
        }
        
        .container {
            max-width: 900px;
            margin: 0 auto;
            background: rgba(255, 255, 255, 0.95);
            border-radius: 20px;
            box-shadow: 0 20px 40px rgba(0, 0, 0, 0.3);
            overflow: hidden;
        }
        
        .header {
            background: linear-gradient(135deg, #500000, #8B0000);
            padding: 40px 30px;
            text-align: center;
            color: white;
            position: relative;
        }
        
        .header::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: url('data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 100 100"><text y="50" font-size="30" opacity="0.1">üèà</text></svg>') repeat;
            animation: float 20s infinite linear;
        }
        
        @keyframes float {
            0% { background-position: 0 0; }
            100% { background-position: 100px 100px; }
        }
        
        .header h1 {
            font-size: 2.5em;
            font-weight: 700;
            margin-bottom: 10px;
            text-shadow: 2px 2px 4px rgba(0, 0, 0, 0.5);
            position: relative;
            z-index: 1;
        }
        
        .header p {
            font-size: 1.1em;
            opacity: 0.9;
            position: relative;
            z-index: 1;
        }
        
        .main-content {
            padding: 30px;
        }
        
        .api-section {
            background: #f8f9fa;
            border-radius: 15px;
            padding: 20px;
            margin-bottom: 30px;
            border-left: 5px solid #500000;
        }
        
        .api-section h3 {
            color: #333;
            margin-bottom: 15px;
            font-weight: 600;
        }
        
        .api-input-group {
            display: flex;
            gap: 10px;
            margin-bottom: 15px;
        }
        
        .api-input {
            flex: 1;
            padding: 12px;
            border: 2px solid #ddd;
            border-radius: 10px;
            font-size: 14px;
            transition: border-color 0.3s;
        }
        
        .api-input:focus {
            outline: none;
            border-color: #500000;
        }
        
        .save-btn {
            background: #28a745;
            color: white;
            border: none;
            padding: 12px 20px;
            border-radius: 10px;
            cursor: pointer;
            font-weight: 600;
            transition: background 0.3s;
        }
        
        .save-btn:hover {
            background: #218838;
        }
        
        .api-status {
            font-size: 14px;
            margin-top: 10px;
            font-weight: 500;
        }
        
        .status-saved {
            color: #28a745;
        }
        
        .status-not-saved {
            color: #dc3545;
        }
        
        .action-section {
            text-align: center;
            margin: 40px 0;
        }
        
        .reality-check-btn {
            background: linear-gradient(135deg, #500000, #8B0000);
            color: white;
            border: none;
            padding: 20px 50px;
            font-size: 20px;
            font-weight: 700;
            border-radius: 50px;
            cursor: pointer;
            transition: transform 0.2s, box-shadow 0.2s;
            display: inline-block;
            margin: 20px auto;
            box-shadow: 0 10px 25px rgba(80, 0, 0, 0.4);
            text-transform: uppercase;
            letter-spacing: 1px;
        }
        
        .reality-check-btn:hover {
            transform: translateY(-3px);
            box-shadow: 0 15px 35px rgba(80, 0, 0, 0.5);
        }
        
        .reality-check-btn:disabled {
            opacity: 0.6;
            cursor: not-allowed;
            transform: none;
        }
        
        .output-section {
            margin-top: 30px;
        }
        
        .output-section label {
            display: block;
            margin-bottom: 15px;
            font-weight: 600;
            color: #333;
            font-size: 18px;
        }
        
        .output-box {
            background: #f8f9fa;
            border: 2px solid #ddd;
            border-radius: 15px;
            padding: 25px;
            min-height: 200px;
            font-size: 16px;
            line-height: 1.7;
            white-space: pre-wrap;
        }
        
        .output-box.has-content {
            background: linear-gradient(135deg, #ffebee, #ffcdd2);
            border-color: #500000;
            border-width: 3px;
        }
        
        .loading {
            text-align: center;
            color: #666;
            font-style: italic;
            display: flex;
            align-items: center;
            justify-content: center;
            min-height: 150px;
        }
        
        .loading::before {
            content: 'üèà';
            display: inline-block;
            animation: spin 2s linear infinite;
            margin-right: 10px;
            font-size: 24px;
        }
        
        @keyframes spin {
            from { transform: rotate(0deg); }
            to { transform: rotate(360deg); }
        }
        
        .error {
            color: #dc3545;
            background: #f8d7da;
            border-color: #dc3545;
        }
        
        .disclaimer {
            background: #fff3cd;
            border: 1px solid #ffeaa7;
            border-radius: 10px;
            padding: 15px;
            margin-top: 20px;
            font-size: 14px;
            color: #856404;
        }
        
        .emoji-large {
            font-size: 1.8em;
            margin: 0 8px;
        }
        
        @media (max-width: 600px) {
            .header h1 {
                font-size: 2em;
            }
            
            .main-content {
                padding: 20px;
            }
            
            .api-input-group {
                flex-direction: column;
            }
            
            .reality-check-btn {
                padding: 15px 30px;
                font-size: 18px;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <h1><span class="emoji-large">üèà</span>Matthew's Aggie Reality Check<span class="emoji-large">üíÄ</span></h1>
            <p>Your daily dose of Aggie accountability</p>
        </div>
        
        <div class="main-content">
            <div class="api-section">
                <h3>üîë API Key Setup</h3>
                <div class="api-input-group">
                    <input type="password" class="api-input" id="apiKey" placeholder="Enter your Google API key">
                    <button class="save-btn" onclick="saveApiKey()">Save Key</button>
                </div>
                <div class="api-status" id="apiStatus">
                    <span class="status-not-saved">‚ö†Ô∏è No API key saved</span>
                </div>
            </div>
            
            <div class="action-section">
                <p style="font-size: 18px; color: #333; margin-bottom: 20px;">
                    Ready to face the brutal truth about Texas A&M football?
                </p>
                <button class="reality-check-btn" onclick="generateRealityCheck()" id="realityBtn">
                    üí£ DELIVER THE REALITY CHECK üí£
                </button>
            </div>
            
            <div class="output-section">
                <label>üî• The Harsh Truth About the Aggies:</label>
                <div class="output-box" id="outputBox">
                    Click the button above to get a comprehensive breakdown of everything wrong with Texas A&M football right now... üíÄ
                </div>
            </div>
            
            <div class="disclaimer">
                <strong>‚ö†Ô∏è Disclaimer:</strong> This tool generates critical analysis based on current news and developments. Content may contain harsh truths and brutal honesty about Aggie football. Proceed with caution if you're emotionally attached to the team.
            </div>
        </div>
    </div>

    <script>
        // Check for saved API key on page load
        window.onload = function() {
            const savedKey = localStorage.getItem('google_api_key_aggie');
            if (savedKey) {
                document.getElementById('apiKey').value = savedKey;
                updateApiStatus(true);
            }
        };

        function saveApiKey() {
            const apiKey = document.getElementById('apiKey').value.trim();
            if (apiKey) {
                localStorage.setItem('google_api_key_aggie', apiKey);
                updateApiStatus(true);
            } else {
                localStorage.removeItem('google_api_key_aggie');
                updateApiStatus(false);
            }
        }

        function updateApiStatus(hasSavedKey) {
            const statusElement = document.getElementById('apiStatus');
            if (hasSavedKey) {
                statusElement.innerHTML = '<span class="status-saved">‚úÖ API key saved and ready!</span>';
            } else {
                statusElement.innerHTML = '<span class="status-not-saved">‚ö†Ô∏è No API key saved</span>';
            }
        }

        async function generateRealityCheck() {
            const apiKey = localStorage.getItem('google_api_key_aggie') || document.getElementById('apiKey').value.trim();
            const outputBox = document.getElementById('outputBox');
            const realityBtn = document.getElementById('realityBtn');

            if (!apiKey) {
                outputBox.className = 'output-box error';
                outputBox.textContent = 'üö´ Please enter your Google API key first!';
                return;
            }

            // Show loading state
            realityBtn.disabled = true;
            realityBtn.textContent = 'üîÑ RESEARCHING THE PAIN...';
            outputBox.className = 'output-box loading';
            outputBox.textContent = 'Digging up all the latest Aggie disasters...';

            try {
                const response = await fetch(`https://generativelanguage.googleapis.com/v1beta/models/gemini-1.5-flash:generateContent?key=${apiKey}`, {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json',
                    },
                    body: JSON.stringify({
                        contents: [{
                            parts: [{
                                text: 'You are a brutally honest sports analyst who specializes in pointing out the flaws and missteps of college football teams. Research the latest developments about Texas A&M football (within the last 6 months) and write a comprehensive reality check that points out all their current flaws, missteps, and problems. Include specific examples of poor decisions, underperformance, recruiting issues, coaching problems, or any other legitimate criticisms. Be harsh but fair, and organize it in a clear, scathing breakdown. Make it detailed and specific to recent events.'
                            }]
                        }],
                        generationConfig: {
                            temperature: 0.7,
                            maxOutputTokens: 800
                        }
                    })
                });

                if (!response.ok) {
                    throw new Error(`API Error: ${response.status}`);
                }

                const data = await response.json();
                const realityCheck = data.candidates[0].content.parts[0].text;

                outputBox.className = 'output-box has-content';
                outputBox.innerHTML = realityCheck.replace(/\*\*(.*?)\*\*/g, '<strong>$1</strong>');
                
            } catch (error) {
                outputBox.className = 'output-box error';
                outputBox.textContent = `üö´ Error generating reality check: ${error.message}`;
            } finally {
                // Reset button
                realityBtn.disabled = false;
                realityBtn.textContent = 'üí£ DELIVER THE REALITY CHECK üí£';
            }
        }

        // Allow Enter key to trigger actions
        document.addEventListener('keydown', function(event) {
            if (event.key === 'Enter') {
                if (event.target.id === 'apiKey') {
                    saveApiKey();
                } else {
                    generateRealityCheck();
                }
            }
        });
    </script>
</body>
</html>
